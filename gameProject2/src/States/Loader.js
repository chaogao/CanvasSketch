Defence.Loader = function(sence, main){	this.sence = sence;	this.main = main;	this.length = Defence.Loader.Source.length;	this.loadedCount = 0;	this.sendRequest();}Defence.Loader.prototype.sendRequest = function(){	var loader = this;		function calcLoadFinish(){		loader.loadedCount++;	}		for(var i = 0; i < this.length; i++){		Defence.Source[i] = new Image();		Defence.Source[i].onload = calcLoadFinish;		Defence.Source[i].src = Defence.Loader.Source[i];	}}Defence.Loader.prototype.run = function(){	if(this.loadedCount + 1 >= this.length) {		this.changeState();	}	else{		this.drawSence();	}}Defence.Loader.prototype.drawSence = function(){	this.sence.renderer.context.clearRect(0, 0, 400, 400);	this.sence.renderer.context.fillText(Defence.gameInfo.title, 200, 100);	this.sence.renderer.context.fillText(Defence.gameInfo.author, 200, 200);	this.sence.renderer.context.fillText(100/this.length * this.loadedCount + "%", 200, 300);}Defence.Loader.prototype.changeState = function(){	this.main.state = new Defence.WaitForBegin(this.sence, this.main);}Defence.Loader.Source = ["ground_grass.png", "ground_store.png", "enemy_1.png",	"enemy_1_explode.png", "enemy_4.png", "towerList.png", "towers.png", "towers_select.png", "bullets.png", "updateButton.png", "enemy_2.png"];Defence.Source = [];(function(){	var host = Defence.getScriptLocation();	for(var i = 0; i<Defence.Loader.Source.length; i++){		Defence.Loader.Source[i] = host + "sources/" + Defence.Loader.Source[i];	}})();